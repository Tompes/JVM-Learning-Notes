# 1.1 运行时数据区域

> Java虚拟机在执行Java程序的过程中会把内存划分为多个不同的区域，这些区域功用各不相同，且创建和销毁的机制也不尽相同。有的区域随着虚拟机的启动而一直存在，而有的区域则是会随着用户线程的启动与结束而创建和销毁。

## 1.1.1 Java VM 的运行时内存区域划分

JVM 的`运行时`内存区域大致有以下：

1. **程序计数器 PC**

   ``程序计数器``（Program Counter Register）, 是一块较小的、用于``指示``当前线程所执行``指令``的``行号``的内存空间。其功能和硬件中的程序计数器PC基本一致。

   在Java虚拟机的概念中，<u>``字节码解释器``工作时就是通过``改变``PC的``值``来``选取``下一条所需执行的字节码``指令``。</u>

   程序计数器PC是``程序控制流``的``指示器``, ``分支``、``循环``、``跳转``、``异常处理``和``线程恢复``等等基础功能都需要依赖PC来完成。

   由于<u>JVM中的多线程是通过线程间轮流切换分配CPU资源的方式来实现</u>的，即在任意确定时刻，一个CPU单元都只会执行一条线程中的指令。故而，<u>为了保证线程切换后能恢复到正确的执行位置，``每条线程``都需要有一个``独立``的``程序计数器（PC）``。</u> 每条线程的PC互不影响，独立存储，这类内存区域可称为“``线程私有内存``”。

2. **虚拟机栈**

3. **本地方法栈**

4. **Java堆**

5. **方法区**

   1. **运行时常量池**

6. **直接内存**

